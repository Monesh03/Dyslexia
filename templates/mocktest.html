{% extends "base.html" %}
{% block content %}

<div class="container mt-5">
  <div class="row justify-content-center">
    <div class="col-lg-8">
      <div class="test-header text-center mb-4">
        <div class="test-icon mb-3">
          <svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" fill="currentColor" class="text-success" viewBox="0 0 16 16">
            <path d="M5 1a2 2 0 0 0-2 2v2H2a2 2 0 0 0-2 2v5a2 2 0 0 0 2 2h1v1a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2v-1h1a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-1V3a2 2 0 0 0-2-2H5zM4 3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1v2H4V3zm1 5a2 2 0 0 0-2 2v1H2a1 1 0 0 1-1-1V7a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1h-1v-1a2 2 0 0 0-2-2H5zm7 2v3a1 1 0 0 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1h6a1 1 0 0 1 1 1z"/>
          </svg>
        </div>
        <h2 class="mb-2">Mock Reading Test</h2>
        <p class="text-muted">Test your comprehension skills</p>
      </div>

      {% if not score %}
      <div class="test-card">
        <div class="question-section mb-4">
          <h5 class="mb-3">Read the following passage:</h5>
          <div class="passage-box">
            <p class="lead">{{ question }}</p>
          </div>
        </div>

        <form method="POST">
          <div class="mb-3">
            <label class="form-label fw-semibold">Your Answer</label>
            <textarea name="answer" class="form-control form-control-lg" rows="5" placeholder="Write your answer here..." required></textarea>
            <div class="form-text">Take your time and write what you understood from the passage.</div>
          </div>

          <div class="d-grid gap-2">
            <button type="submit" class="btn btn-primary btn-lg">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 16 16" class="me-2">
                <path d="M12.736 3.97a.733.733 0 0 1 1.047 0c.286.289.29.756.01 1.05L7.88 12.01a.733.733 0 0 1-1.065.02L3.217 8.384a.757.757 0 0 1 0-1.06.733.733 0 0 1 1.047 0l3.052 3.093 5.4-6.425a.247.247 0 0 1 .02-.022Z"/>
              </svg>
              Submit Answer
            </button>
          </div>
        </form>
      </div>
      {% endif %}

      {% if score %}
      <div class="result-card text-center">
        <div class="score-circle mb-4">
          <div class="score-value">{{ score }}/10</div>
          <div class="score-label">Your Score</div>
        </div>

        {% if score >= 8 %}
        <div class="result-message excellent">
          <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" fill="currentColor" viewBox="0 0 16 16" class="mb-3">
            <path d="M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"/>
          </svg>
          <h3 class="mb-2">Excellent Work!</h3>
          <p class="text-muted">You have great comprehension skills. Keep it up!</p>
        </div>
        {% elif score >= 5 %}
        <div class="result-message good">
          <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" fill="currentColor" viewBox="0 0 16 16" class="mb-3">
            <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
            <path d="M10.97 4.97a.235.235 0 0 0-.02.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.06L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"/>
          </svg>
          <h3 class="mb-2">Good Job!</h3>
          <p class="text-muted">You're making progress. Keep practicing to improve!</p>
        </div>
        {% else %}
        <div class="result-message needs-practice">
          <svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" fill="currentColor" viewBox="0 0 16 16" class="mb-3">
            <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/>
            <path d="M4.285 9.567a.5.5 0 0 1 .683.183A3.498 3.498 0 0 0 8 11.5a3.498 3.498 0 0 0 3.032-1.75.5.5 0 1 1 .866.5A4.498 4.498 0 0 1 8 12.5a4.498 4.498 0 0 1-3.898-2.25.5.5 0 0 1 .183-.683zM7 6.5C7 7.328 6.552 8 6 8s-1-.672-1-1.5S5.448 5 6 5s1 .672 1 1.5zm4 0c0 .828-.448 1.5-1 1.5s-1-.672-1-1.5S9.448 5 10 5s1 .672 1 1.5z"/>
          </svg>
          <h3 class="mb-2">Keep Practicing!</h3>
          <p class="text-muted">Don't worry! Practice makes perfect. Try again!</p>
        </div>
        {% endif %}

        <div class="mt-4">
          <a href="/mocktest" class="btn btn-primary btn-lg me-2">Try Another Test</a>
          <a href="/dashboard" class="btn btn-outline-secondary btn-lg">Back to Dashboard</a>
        </div>
      </div>
      {% endif %}

      <div class="tips-section mt-4">
        <h5 class="mb-3">Test Tips</h5>
        <ul class="tips-list-small">
          <li>Read the passage carefully before answering</li>
          <li>Look for key words that relate to the question</li>
          <li>Take your time, there's no rush</li>
          <li>Write in your own words what you understood</li>
        </ul>
      </div>
    </div>
  </div>
</div>

{% endblock %}
